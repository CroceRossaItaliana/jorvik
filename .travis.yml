language: python
python:
- '3.4'
- '3.5'
addons:
  postgresql: '9.4'
cache:
  directories:
  - "$HOME/.cache/pip"
before_script:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- sleep 3
- psql -U postgres -c 'CREATE DATABASE test_jorvik;'
- psql -U postgres -c "CREATE EXTENSION postgis" -d test_jorvik
- psql -U postgres -c "CREATE EXTENSION postgis_topology" -d test_jorvik
- pg_restore -O -d test_jorvik ./base/test_jorvik.pgsql
install:
- pip install -U pip wheel
- pip install -r requirements.txt
script:
- python ./manage.py test -k -v 3 --parallel 2
env:
  global:
  - secure: g6IV0XXpi5whpfQeSEtlT8qOdnWYCDm04PDJYfqMUFB1aeZdpr84Ex5Sf/Dco02mytSXLKzbGqWVP0XIKknGin11GLsbjFZuiGNWBeHdbsKCWaNqhTP4kRYZjLU5YpSrozVLAoiilOKQrTFeeg7aigee46NfA5UEaHpOnhzdqOkAPPonVwqXvtEFO+lH2jbl2wHLC3YK+Qui3pQWxOl0SeR1xGk+VoRW35HsRg9cRXh8exeNIVLn6prtFi1lOX2boteshlmJAqNojqznWrHln4593Cqbw3iuxyxOjPpioB4NWCc/QDOVkvJWDbc570ymb8/tGhRehcjlKtOPZHy9w8Bot32PvwILKipe4t2tq4hjHOLz8GkskhLp/v8ipIZWeMITPQG9idwb91zOwRh98kRcjQU16ueu6aDtpx8XYbwC286C3377KIKQqHdCDAK4ROFWJv9+CxAVgAtbLTKHWtqcop6G/u5BT3qXmZmF9DPA492O0TuM0VrCq0U4jDAG1VCwCJ/x4LYIpCcJVnZ6+wN/J4NFinO0Wfq3m+TF5DZ4mVkAXSC9Uc2zxIpxnXUikd+sGNtwopJv9FYA1+qddxFQpn2AxYqPzlaLNxA/qln05uScBqNIhAp570CYS/grawXJvXJK0ivKGwT2JH5T1DYdCCQK8eI2Bfjt7aJsaQk=
  - secure: ZJer2Jc/paeXNHixqEhpIbJF6u+t4ogSQEnP3WeCCAKV5PqcUP37X3mitWZXftsxOG1hUPl53NUBwZ2XU1lBGOQSxy6Hg778pTwveEi/6Bp6u05mzlJMwqamSQ78vHX+T9Geygm+aN1twvvSH+sr6lrq0BXlZ79v7rhZWhcEsiFKGEEeODGO9yDTZ94hEJtbRSG8mrr/DiHTyQPELmt6P+pM8Gz+IVSNUQYBuoUOBMs+DgHwRyzDTC27FzkxMhS5LSAormENARH04oeFVGiOsdeDfNgVNtiAf/ttkcU/jROA0eTWbpRCZQ1nyjHxMbOmSbSfJCZqWYtgDzqGZy2/Jx6ZWNlVGrDHPVVCs0LI+6r9w5m/MfHvJixb81NoPwLzqoNM4ZmK5KcdiLY+Llve6idi427rj6wWvA7gq6PCsm3T/23knwMRC+e1Blo05JwmXdif67/vlVcF56EhUZQaeFGBNHqKYNLCNUR/7MrGulPO55Rpk3KRaOtJt4iGsBDY3GQz6Z27tjhkjRvieq5oh2xvPXY0KEtIgk34CHbEd1ukjPlkU64sFv6EbLv8iPGQtbwSW5xmqvmMtXoBCWhZh9S+rGUFFXJ61Sia2smBr7lClYSNjTD2etZ8jtO8tPzOK/GazF/wzq8aNydcOdRSziHyAkGCMmy/mYw4z0164fQ=
  - secure: j8ZSZjIQRjH7HRBEE//qAnCxQoZO2XxxGnELTcPwfA5F60JtRhKDy7CB8sKpCVsUqXg+kgvi1ZgHZkKVtb3vAeqOgChKQ72Z2/MLSWHXj/u0H1/z/lGsGOoi2vO85DuT9DFmyOAV1TMxC9X4rUTXq36RTE5JW9xfXbP52CqUVSJxaVoX1pP6ZiPhqZymK/UGVQO8VdEnNKeFG2KZrabwijF5HXNiT0zm2HyrwnvS/SsYOYOxgSw/zK5u/YbO1cWdCBbQfDHuXgXFo0Toua9N1HINfKwxM9/gRbMJxYym+LtvfssSRDG1N3GZFU7fwG1UEsAnUbNwRLOp26Kj8mAuVkP9kl1aNAtan1qnmG71lRAYQ4VS+Zw5742dK3k5Bm0d3oaYulawJ2ouAbMZslRAcCT+6SXIqnTk6FHYeZ2V5blIAVsE8niVjxbEt2o7LNIq8R5Ykb1GWKRViX1TmUu2BZgotjuj8MEU9toAvbpiv0RderRfYEeTJvH6jz/00ixcNYejbbrrEVgsrqVICj2z/iJyPVUNuIDavDndgS/RUZMO3vTFTUJHFqqBI8syayEg4v3BLStmf18awrpdGbOPR5ZDb3lWVZuvmOtZwjNHJY9jCoTjzMZQDqrLLf3+OHt6qVw1WsigBOm6hpP7VXN0RAx+8ZMo3mUmlg1sgFvfES4=
